<html lang="en">
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="/css/addnewpost.css">
<title> Create a post</title>
<body>
<%- include('partials/navbar.ejs') %>
<h1>Create magnificence</h1>
<div class="create-post">
    <form action="/posts" method="POST">
        <label for="author">Post author:</label>
        <input type="text" id="author" name="author" required><br><br>

        <label for="body">Post body:</label>
        <input type="text" id="body" name="body" required><br><br>

        <label for="image"> URL link:</label>
        <input type="text" id="image" name="image"><br><br>
        <button type="submit">Submit</button>
    </form>
</div>
<%- include('partials/footer.ejs') %>
<script>
    const postreq = document.querySelector('a.post');
    postreq.addEventListener('click', () => {
        const endpoint = `/posts/${postreq.dataset.post}`;
        fetch(endpoint, {
            method: 'POST',
        }).then(window.location.href = '/')
    });
</script>
</body>
</html>